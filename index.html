<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSICO MANAGER - Gerenciamento de Pacientes</title>

    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/main.min.css' rel='stylesheet' />
    
    <style>
        /* --- Cores e Tipografia (Mantendo o Layout Profissional) --- */
        :root {
            --cor-principal: #3498db; /* Azul */
            --cor-secundaria: #2c3e50; /* Azul Escuro */
            --cor-fundo: #f4f6f9;
            --cor-fundo-card: #ffffff;
            --cor-borda: #dcdfe6;
            --cor-sucesso: #2ecc71; /* Verde */
            --cor-erro: #e74c3c; /* Vermelho */
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--cor-fundo);
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
        }

        /* --- Menu Lateral (Sidebar) --- */
        .sidebar {
            width: 200px;
            background-color: var(--cor-secundaria);
            color: white;
            padding-top: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            position: fixed;
            height: 100%;
            z-index: 10;
        }
        .sidebar h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--cor-principal);
            font-size: 1.5em;
        }
        .sidebar a {
            display: block;
            padding: 15px 20px;
            text-decoration: none;
            color: #dcdde1;
            transition: background 0.3s, color 0.3s;
            border-left: 5px solid transparent;
            cursor: pointer;
        }
        .sidebar a:hover, .sidebar a.active {
            background-color: #34495e;
            color: white;
            border-left: 5px solid var(--cor-principal);
        }
        .sidebar a::before {
            content: "•";
            margin-right: 10px;
            color: var(--cor-principal);
        }

        /* --- Conteúdo Principal e Views --- */
        .content {
            margin-left: 200px;
            padding: 40px;
            flex-grow: 1;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0;
            color: var(--cor-secundaria);
        }
        .card {
            background-color: var(--cor-fundo-card);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        /* --- Elementos de Formulário e Botões --- */
        h2 {
            color: var(--cor-principal);
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--cor-borda);
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        button {
            background: var(--cor-principal);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s ease;
            margin-top: 10px;
        }
        button:hover {
            background: #2980b9;
        }
        #buscaForm {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }
        #buscaForm .form-group {
            flex-grow: 1;
            margin-bottom: 0;
        }
        #top-buttons button {
            background: var(--cor-sucesso);
            margin-left: 10px;
        }
        .alert {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
        }
        .alert-success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .alert-info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }

        /* --- FullCalendar Style Adjustments --- */
        #calendar {
            max-width: 100%;
            margin: 0 auto;
            font-size: 0.9em;
            /* Altura fixa para manter o layout */
            height: 700px;
        }
        .fc-toolbar-title {
            color: var(--cor-secundaria);
        }
        .fc-event {
            background-color: var(--cor-principal);
            border: 1px solid #2980b9;
            cursor: pointer;
        }
        .fc-daygrid-event-dot {
            border-color: #fff !important;
        }
        .fc-event[data-type="block"] {
            background-color: var(--cor-erro);
            border: 1px solid #c0392b;
        }
        .fc-day-other {
            opacity: 0.5;
        }
        
        /* --- Modal (Para Agendamento e Bloqueio) --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover, .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        .modal button {
            width: 100%;
            margin-bottom: 10px;
        }
        #btnExcluir {
            background-color: var(--cor-erro);
        }
        #btnExcluir:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>PSICO MANAGER</h2>
        <a id="navClientes" data-view="clientes">Clientes/Busca</a>
        <a id="navAgenda" class="active" data-view="agenda">Agenda</a>
        <a id="navRelatorios" data-view="relatorios">Relatórios</a>
    </div>

    <div class="content">

        <div class="header">
            <h1 id="mainTitle">Agenda</h1>
            <div id="top-buttons">
                </div>
        </div>

        <div class="card">
            
            <div id="viewClientes" class="view-content" style="display:none;">
                
                <form id="buscaForm">
                    <div class="form-group">
                        <label for="buscaCpf">Buscar cliente pelo **CPF**:</label>
                        <input type="text" id="buscaCpf" required placeholder="Digite o CPF (somente números)">
                    </div>
                    <button type="submit">Buscar Cliente</button>
                </form>
                
                <p id="statusMensagemClientes" class="alert"></p>

                <div id="alertaCadastro" class="alert-info" style="display:none;">
                    O cliente com o CPF <span id="cpfNaoEncontrado"></span> não foi encontrado. Por favor, preencha os dados abaixo.
                </div>

                <form id="cadastroForm" style="display:none;" class="card">
                    <h2>Cadastrar Novo Cliente</h2>
                    <input type="hidden" name="action" value="cadastrarPaciente">
                    
                    <div class="form-group"><label for="cNome">Nome Completo:</label><input type="text" name="nome" id="cNome" required></div>
                    <div class="form-group"><label for="cCPF">CPF:</label><input type="text" name="cpf" id="cCPF" required readonly></div>
                    <div class="form-group"><label for="cNasc">Data de Nascimento:</label><input type="date" name="data_nascimento" id="cNasc" required></div>
                    <div class="form-group"><label for="cTratamento">Tratamento/Condição:</label><input type="text" name="tratamento" id="cTratamento" required></div>
                    <div class="form-group"><label for="cPreco">Preço da Sessão (R$):</label><input type="number" name="preco" id="cPreco" step="0.01" min="0" required></div>
                    
                    <button type="submit">Finalizar Cadastro</button>
                </form>

                <div id="dadosPaciente" style="display:none;" class="card">
                    <h2>Informações do Cliente</h2>
                    <div class="dados-paciente">
                        <p><b>Nome:</b> <span id="pNome"></span></p>
                        <p><b>CPF:</b> <span id="pCPF"></span></p>
                        <p><b>Tratamento:</b> <span id="pTratamento"></span></p>
                        <p><b>Preço da Sessão:</b> R$ <span id="pPreco"></span></p>
                        <p><b>Sessões neste mês:</b> <span id="pSessoes"></span> | <b>Total no mês:</b> R$ <span id="pTotal"></span></p>
                    </div>

                    <h3>Histórico de Sessões</h3>
                    <div id="pHistorico" class="historico"></div>

                    <h3>Registrar Nova Sessão</h3>
                    <form id="novaSessao">
                        <input type="hidden" name="action" value="registrarSessao">
                        <input type="hidden" name="cpf" id="nCPF">
                        
                        <div class="form-group"><label for="data_sessao">Data da Sessão:</label><input type="date" name="data_sessao" id="data_sessao" required></div>
                        <div class="form-group checkbox-group"><input type="checkbox" name="compareceu" id="compareceu" value="Sim"><label for="compareceu">O Cliente **Compareceu** à Consulta?</label></div>
                        <div class="form-group"><label for="anotacao">Anotação da Sessão (Opcional):</label><textarea name="anotacao" id="anotacao" rows="3" placeholder="Anotações, evolução, próxima etapa..."></textarea></div>

                        <button type="submit">Salvar Sessão e Histórico</button>
                    </form>
                </div>

                <div id="listaPacientesContainer" style="display:none;" class="card">
                    <h2>Lista de Clientes Cadastrados</h2>
                    <ul id="listaPacientes"></ul>
                </div>
            </div> <div id="viewAgenda" class="view-content">
                <p id="statusMensagemAgenda" class="alert"></p>
                <div id='calendar'></div>
            </div>

            <div id="viewRelatorios" class="view-content" style="display:none;">
                <h2>Relatórios e Resumo Mensal</h2>
                <div class="placeholder">
                    <h3>Funcionalidade em Construção</h3>
                    <p>Aqui você poderá ver relatórios financeiros, frequência de pacientes e resumos de atividades.</p>
                </div>
            </div>

        </div> </div> <div id="agendaModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Agendar Novo Evento</h2>
            <p>Data e Hora: <strong id="modalDateTime"></strong></p>

            <form id="modalForm">
                <input type="hidden" id="modalEventId">
                <input type="hidden" id="modalStart">
                <input type="hidden" id="modalEnd">

                <div class="form-group">
                    <label for="modalTitleInput">Título/Nome do Cliente:</label>
                    <input type="text" id="modalTitleInput" required placeholder="Ex: Consulta - Nome do Cliente">
                </div>
                
                <div class="form-group">
                    <label for="modalType">Tipo de Evento:</label>
                    <select id="modalType">
                        <option value="AGENDAMENTO">Agendamento (Cliente)</option>
                        <option value="BLOQUEIO">Bloqueio (Pessoal)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="modalDuration">Duração (em minutos):</label>
                    <input type="number" id="modalDuration" value="60" min="15" step="15" required>
                </div>

                <button type="submit" id="btnSalvar">Salvar Evento</button>
                <button type="button" id="btnExcluir" style="display:none;">Desagendar/Excluir</button>
            </form>
        </div>
    </div>
    
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
    <script>
        // SEU LINK FINAL DO GOOGLE APPS SCRIPT
        const scriptURL = "https://script.google.com/macros/s/AKfycbxwiOvj9ffd8Tn2SA0CaATKduzRocduv9Cd6pwdwrVGzDuaScc-2qpTc2_XLF7PkyrX/exec";

        // --- Variáveis Globais e DOM ---
        const navLinks = document.querySelectorAll(".sidebar a");
        const viewContents = document.querySelectorAll(".view-content");
        const mainTitle = document.getElementById("mainTitle");
        
        // Mensagens de status
        const statusMensagemClientes = document.getElementById("statusMensagemClientes");
        const statusMensagemAgenda = document.getElementById("statusMensagemAgenda");
        
        // Modal Agenda
        const modal = document.getElementById("agendaModal");
        const closeBtn = document.getElementsByClassName("close")[0];
        const modalForm = document.getElementById("modalForm");
        const modalTitleEl = document.getElementById("modalTitle");
        const modalDateTime = document.getElementById("modalDateTime");
        const btnExcluir = document.getElementById("btnExcluir");
        const btnSalvar = document.getElementById("btnSalvar");
        
        // --- FUNÇÕES DE STATUS E UTILS ---
        function showStatus(msg, type, view) {
            const statusEl = view === 'agenda' ? statusMensagemAgenda : statusMensagemClientes;
            statusEl.textContent = msg;
            statusEl.className = `alert alert-${type}`;
            setTimeout(() => {
                statusEl.textContent = "";
                statusEl.className = "alert";
            }, 5000);
        }

        // --- FUNÇÕES DE NAVEGAÇÃO E VIEWS ---
        function showView(viewId) {
            viewContents.forEach(view => {
                view.style.display = 'none';
            });
            const viewElement = document.getElementById(viewId);
            viewElement.style.display = 'block';

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.view === viewId.replace('view', '').toLowerCase()) {
                    link.classList.add('active');
                    mainTitle.textContent = link.textContent.split("/")[0].trim();
                }
            });
            
            // Lógica especial para a Agenda
            if (viewId === 'viewAgenda' && typeof calendar !== 'undefined') {
                calendar.render();
            } else if (viewId === 'viewClientes') {
                 mainTitle.textContent = 'Gerenciamento de Clientes';
            }
        }

        // Adiciona evento de clique aos links de navegação
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                showView('view' + link.dataset.view.charAt(0).toUpperCase() + link.dataset.view.slice(1));
            });
        });
        
        // --- CALENDÁRIO (FULLCALENDAR) ---
        let calendar;

        document.addEventListener('DOMContentLoaded', function() {
            // Inicializa o calendário
            var calendarEl = document.getElementById('calendar');
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'timeGridWeek', // Vista semanal com hora
                locale: 'pt-br',
                slotMinTime: '07:00:00', // Horário de início do dia de trabalho
                slotMaxTime: '22:00:00', // Horário de fim do dia de trabalho
                businessHours: {
                    daysOfWeek: [ 1, 2, 3, 4, 5 ], // Segunda a Sexta
                    startTime: '08:00',
                    endTime: '18:00'
                },
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                selectable: true,
                editable: true,
                slotLabelFormat: { hour: 'numeric', minute: '2-digit', omitZeroMinute: false, meridiem: 'short' },
                
                // 3. FONTE DE EVENTOS (Conexão com o GAS)
                events: function(fetchInfo, successCallback, failureCallback) {
                    showStatus('Carregando agenda...', 'info', 'agenda');
                    fetch(`${scriptURL}?action=getAgenda&start=${fetchInfo.startStr}&end=${fetchInfo.endStr}`)
                        .then(response => response.json())
                        .then(data => {
                            if (data.erro) {
                                showStatus('Erro ao carregar agenda: ' + data.erro, 'error', 'agenda');
                                failureCallback(data.erro);
                                return;
                            }
                            // Mapeia dados do GAS para o formato FullCalendar
                            const events = data.map(event => ({
                                id: event.id,
                                title: event.title,
                                start: event.start,
                                end: event.end,
                                color: event.type === 'BLOQUEIO' ? varCorErro : varCorPrincipal,
                                extendedProps: { type: event.type }
                            }));
                            successCallback(events);
                            showStatus('Agenda carregada com sucesso.', 'success', 'agenda');
                        })
                        .catch(error => {
                            showStatus('Erro de rede ao carregar agenda.', 'error', 'agenda');
                            failureCallback(error);
                        });
                },

                // 4. AÇÃO: CLIQUE EM UM ESPAÇO VAZIO (Agendar/Bloquear)
                select: function(info) {
                    openModalForNew(info.start, info.end);
                },

                // 5. AÇÃO: CLIQUE EM UM EVENTO EXISTENTE (Editar/Desagendar)
                eventClick: function(info) {
                    openModalForEdit(info.event);
                },
                
                // 6. AÇÃO: DRAG-AND-DROP (Mover/Redimensionar, se fosse implementado)
                // eventDrop: function(info) { /* ... lógica para mover evento ... */ },
                // eventResize: function(info) { /* ... lógica para redimensionar evento ... */ },
            });
            calendar.render();
            
            // Inicia na view Agenda, já que é o foco da requisição
            showView('viewAgenda');
        });

        const varCorPrincipal = getComputedStyle(document.documentElement).getPropertyValue('--cor-principal').trim();
        const varCorErro = getComputedStyle(document.documentElement).getPropertyValue('--cor-erro').trim();

        // --- MODAL LÓGICA ---
        
        // Abre o modal para um NOVO evento
        function openModalForNew(start, end) {
            modalTitleEl.textContent = "Agendar Novo Evento/Bloqueio";
            modalDateTime.textContent = new Date(start).toLocaleString('pt-BR', { dateStyle: 'short', timeStyle: 'short' });
            
            // Preenche os campos hidden
            document.getElementById('modalEventId').value = '';
            document.getElementById('modalStart').value = start.toISOString();
            document.getElementById('modalEnd').value = end ? end.toISOString() : '';

            // Reseta campos do formulário
            document.getElementById('modalTitleInput').value = '';
            document.getElementById('modalType').value = 'AGENDAMENTO';
            document.getElementById('modalDuration').value = 60;

            btnExcluir.style.display = 'none';
            btnSalvar.textContent = 'Salvar Evento';
            modal.style.display = 'block';
        }

        // Abre o modal para EDITAR um evento existente
        function openModalForEdit(event) {
            modalTitleEl.textContent = event.extendedProps.type === 'BLOQUEIO' ? "Editar Bloqueio" : "Editar Agendamento";
            modalDateTime.textContent = new Date(event.start).toLocaleString('pt-BR', { dateStyle: 'short', timeStyle: 'short' });
            
            document.getElementById('modalEventId').value = event.id;
            document.getElementById('modalStart').value = event.start.toISOString();
            document.getElementById('modalEnd').value = event.end.toISOString();
            document.getElementById('modalTitleInput').value = event.title;
            document.getElementById('modalType').value = event.extendedProps.type;
            
            // Calcula a duração em minutos
            const durationMs = event.end.getTime() - event.start.getTime();
            const durationMins = Math.round(durationMs / 60000);
            document.getElementById('modalDuration').value = durationMins;

            btnExcluir.style.display = 'block'; // Mostra botão de exclusão
            btnSalvar.textContent = 'Atualizar Evento';
            modal.style.display = 'block';
        }

        // Fechar modal
        closeBtn.onclick = function() {
            modal.style.display = "none";
        }
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        
        // --- Submissão do Formulário do Modal (Agendar / Bloquear) ---
        modalForm.addEventListener('submit', async function(e) {
            e.preventDefault();

            const eventId = document.getElementById('modalEventId').value;
            const startStr = document.getElementById('modalStart').value;
            const title = document.getElementById('modalTitleInput').value;
            const type = document.getElementById('modalType').value;
            const duration = parseInt(document.getElementById('modalDuration').value);
            
            // Calcula o fim com base na duração
            const start = new Date(startStr);
            const end = new Date(start.getTime() + duration * 60000); // Adiciona duração em minutos

            const data = {
                action: 'createEvent', // Ação no GAS para criar/modificar
                id: eventId, // Se vazio, é novo; se preenchido, é modificação
                title: title,
                start: start.toISOString(),
                end: end.toISOString(),
                type: type
            };

            showStatus(eventId ? 'Atualizando evento...' : 'Agendando...', 'info', 'agenda');
            modal.style.display = 'none';

            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams(data)
                });
                const result = await response.json();

                if (result.sucesso) {
                    showStatus('Evento salvo com sucesso!', 'success', 'agenda');
                    calendar.refetchEvents(); // Recarrega a agenda
                } else {
                    showStatus(result.erro || 'Erro ao salvar evento.', 'error', 'agenda');
                }
            } catch (error) {
                showStatus('Erro de rede ao salvar evento.', 'error', 'agenda');
            }
        });
        
        // --- Botão Desagendar / Excluir ---
        btnExcluir.addEventListener('click', async function() {
            if (!confirm('Tem certeza que deseja excluir este evento?')) return;

            const eventId = document.getElementById('modalEventId').value;
            
            if (!eventId) {
                showStatus('Erro: ID do evento não encontrado.', 'error', 'agenda');
                return;
            }

            const data = { action: 'deleteEvent', id: eventId }; // Ação no GAS para excluir

            showStatus('Excluindo evento...', 'info', 'agenda');
            modal.style.display = 'none';

            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams(data)
                });
                const result = await response.json();

                if (result.sucesso) {
                    showStatus('Evento excluído com sucesso!', 'success', 'agenda');
                    calendar.refetchEvents(); // Recarrega a agenda
                } else {
                    showStatus(result.erro || 'Erro ao excluir evento.', 'error', 'agenda');
                }
            } catch (error) {
                showStatus('Erro de rede ao excluir evento.', 'error', 'agenda');
            }
        });

        // --- MANTENDO AS FUNÇÕES DE CLIENTES (Busca, Cadastro, Sessão, Lista) ---
        // (Elas usam um status diferente: statusMensagemClientes)
        
        const buscaForm = document.getElementById("buscaForm");
        const dadosPacienteDiv = document.getElementById("dadosPaciente");
        const novaSessaoForm = document.getElementById("novaSessao");
        const cadastroForm = document.getElementById("cadastroForm");
        const alertaCadastroDiv = document.getElementById("alertaCadastro");
        const btnVerPacientes = document.getElementById("btnVerPacientes");
        const listaPacientesContainer = document.getElementById("listaPacientesContainer");
        const listaPacientesUl = document.getElementById("listaPacientes");

        function resetFormsClientes() {
            dadosPacienteDiv.style.display = "none";
            cadastroForm.style.display = "none";
            alertaCadastroDiv.style.display = "none";
            listaPacientesContainer.style.display = "none";
        }
        
        // BUSCA PRINCIPAL POR CPF
        buscaForm.addEventListener("submit", async e => {
            e.preventDefault();
            resetFormsClientes();
            // ... (restante da lógica de busca de clientes - omitido por brevidade, mas deve ser mantida)
            showStatus("Funcionalidade de Cliente mantida. Lembre-se que o seu Google Apps Script precisa gerenciar duas APIs agora: Calendar (para Agenda) e Sheets (para Clientes).", "info", "clientes");
        });

        // CADASTRAR NOVO PACIENTE
        cadastroForm.addEventListener("submit", async e => {
            e.preventDefault();
            // ... (restante da lógica de cadastro de clientes - omitido por brevidade, mas deve ser mantida)
            showStatus("Funcionalidade de Cliente mantida.", "info", "clientes");
        });

        // SALVAR NOVA SESSÃO
        novaSessaoForm.addEventListener("submit", async e => {
            e.preventDefault();
            // ... (restante da lógica de salvar sessão - omitido por brevidade, mas deve ser mantida)
            showStatus("Funcionalidade de Cliente mantida.", "info", "clientes");
        });

        // VER TODOS OS PACIENTES
        btnVerPacientes.addEventListener("click", async () => {
            // Garante que estamos na view correta antes de listar
            showView('viewClientes'); 
            resetFormsClientes();
            // ... (restante da lógica de listar clientes - omitido por brevidade, mas deve ser mantida)
            showStatus("Funcionalidade de Cliente mantida.", "info", "clientes");
        });
        
        // Clicar em um paciente da lista para buscar
        listaPacientesUl.addEventListener("click", e => {
            if (e.target.tagName === 'LI') {
                const cpfPaciente = e.target.dataset.cpf;
                document.getElementById("buscaCpf").value = cpfPaciente;
                buscaForm.dispatchEvent(new Event('submit'));
            }
        });
    </script>
</body>
</html>
